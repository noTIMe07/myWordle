<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abby's Wordle</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #121213; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        .grid-container { display: flex; justify-content: center; }
        .grid { display: grid; grid-template-columns: repeat(5, 60px); grid-template-rows: repeat(6, 60px); gap: 10px; }
        .cell { width: 60px; height: 60px; border: 2px solid #3a3a3c; text-align: center; font-size: 32px; line-height: 60px; font-weight: bold; text-transform: uppercase; background-color: #121213; color: white; transition: background-color 1.5s ease; }
        .correct { background-color: #538d4e !important; }
        .present { background-color: #b59f3b !important; }
        .absent { background-color: #3a3a3c !important; }
        .keyboard { display: flex; flex-direction: column; align-items: center; margin-top: 20px; }
        .row { display: flex; }
        .key { width: 50px; height: 60px; margin: 5px; font-size: 18px; font-weight: bold; text-transform: uppercase; background-color: #818384; color: white; border: none; cursor: pointer; transition: background-color 0s ease; }
        .enter { width: 100px; }
        #message { font-size: 36px; margin-bottom: 20px; color: #ff4081; font-weight: bold; }
        .heart { position: absolute; font-size: 20px; color: #ff4081; animation: floatUp 1s ease-out forwards; }
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-100px); opacity: 0; }
        }
    </style>
</head>
<body>
    <p id="message"></p>
    <h1 style="font-size:6vw;">Abby's Wordle</h1>
    <div class="grid-container">
        <div id="grid" class="grid"></div>
    </div>
    <div class="keyboard">
        <div class="row">
            <button class="key">Q</button><button class="key">W</button><button class="key">E</button><button class="key">R</button><button class="key">T</button><button class="key">Y</button><button class="key">U</button><button class="key">I</button><button class="key">O</button><button class="key">P</button>
        </div>
        <div class="row">
            <button class="key">A</button><button class="key">S</button><button class="key">D</button><button class="key">F</button><button class="key">G</button><button class="key">H</button><button class="key">J</button><button class="key">K</button><button class="key">L</button>
        </div>
        <div class="row">
            <button class="key enter" onclick="checkGuess()">Enter</button>
            <button class="key">Z</button><button class="key">X</button><button class="key">C</button><button class="key">V</button><button class="key">B</button><button class="key">N</button><button class="key">M</button>
            <button class="key">⌫</button>
        </div>
    </div>
    
    <script>
        const solutionWords = {
            "2-8": "APPLE",
            "2-9": "MOUSE",
            "2-10": "GRAPE"
        };
        
        const today = new Date();
        const key = `${today.getMonth()}-${today.getDate()}`;
        const wordOfTheDay = solutionWords[key] || "APPLE";
        
        let attempts = [];
        let currentGuess = "";
        let gameEnded = false;
        const keyboardKeys = document.querySelectorAll(".key");
        
        function initializeGrid() {
            const grid = document.getElementById("grid");
            for (let row = 0; row < 6; row++) {
                for (let col = 0; col < 5; col++) {
                    let cell = document.createElement("div");
                    cell.className = "cell";
                    grid.appendChild(cell);
                }
            }
        }
        
        document.addEventListener("keydown", (event) => {
            if (gameEnded) return;
            let key = event.key.toUpperCase();
            if (key === "BACKSPACE") {
                currentGuess = currentGuess.slice(0, -1);
            } else if (key === "ENTER") {
                checkGuess();
            } else if (/^[A-Z]$/.test(key) && currentGuess.length < 5) {
                currentGuess += key;
            }
            updateGrid();
        });
		
		document.querySelectorAll(".key").forEach(button => {
            button.addEventListener("click", () => {
				if (gameEnded) return;
                let letter = button.textContent;
                if (letter === "⌫") {
                    currentGuess = currentGuess.slice(0, -1);
                } else if (letter === "Enter") {
                    checkGuess();
                } else if (currentGuess.length < 5) {
                    currentGuess += letter;
                }
                updateGrid();
            });
        });

        function updateGrid() {
            let gridCells = document.querySelectorAll(".cell");
            let currentCellIndex = attempts.length * 5;
            for (let i = 0; i < 5; i++) {
                let cell = gridCells[currentCellIndex + i];
                cell.textContent = i < currentGuess.length ? currentGuess[i] : "";
            }
        }

        function spawnHearts() {
            for (let i = 0; i < 20; i++) {
                let heart = document.createElement("div");
                heart.className = "heart";
                heart.textContent = "❤️";
                heart.style.left = `${Math.random() * 100}vw`;
                heart.style.top = `${Math.random() * 100}vh`;
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 1000);
            }
        }
        
        function checkGuess() {
            if (currentGuess.length !== 5 || gameEnded) return;
			//if (!solutionWords[key]) return;
            let startIndex = attempts.length * 5;
            let gridCells = document.querySelectorAll(".cell");
            let keyMap = {};
            
            for (let i = 0; i < 5; i++) {
                let cell = gridCells[startIndex + i];
                let key = Array.from(document.querySelectorAll(".key")).find(k => k.textContent === currentGuess[i]);
                
                if (currentGuess[i] === wordOfTheDay[i]) {
                    cell.classList.add("correct");
                    keyMap[currentGuess[i]] = "correct";
                } else if (wordOfTheDay.includes(currentGuess[i])) {
                    cell.classList.add("present");
                    if (!keyMap[currentGuess[i]] || keyMap[currentGuess[i]] === "absent") keyMap[currentGuess[i]] = "present";
                } else {
                    cell.classList.add("absent");
                    if (!keyMap[currentGuess[i]]) keyMap[currentGuess[i]] = "absent";
                }
            }
            
            keyboardKeys.forEach(key => {
                let letter = key.textContent;
                if (keyMap[letter]) {
                    key.classList.remove("correct", "present", "absent");
                    key.classList.add(keyMap[letter]);
                }
            });
            
            attempts.push(currentGuess);
			
            if (currentGuess === wordOfTheDay) {
                document.getElementById("message").textContent = "Good job Abby ♡";
                gameEnded = true;
                spawnHearts();
            }
            
            currentGuess = "";
        }
        
        initializeGrid();
    </script>
</body>
</html>
